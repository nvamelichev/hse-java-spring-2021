<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="462px" preserveAspectRatio="none" style="width:655px;height:461px;" version="1.1" viewBox="0 0 655 461" width="655.2px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="160.1578" style="stroke:#A80036;stroke-width:1.4;" width="14" x="194.6" y="161.6016"/><line style="stroke:#A80036;stroke-width:1.4;stroke-dasharray:5.0,5.0;" x1="39.2" x2="39.2" y1="118.0156" y2="346.9594"/><line style="stroke:#A80036;stroke-width:1.4;stroke-dasharray:5.0,5.0;" x1="201.6" x2="201.6" y1="118.0156" y2="346.9594"/><line style="stroke:#A80036;stroke-width:1.4;stroke-dasharray:5.0,5.0;" x1="557.9" x2="557.9" y1="118.0156" y2="346.9594"/><text fill="#000000" font-family="sans-serif" font-size="19.6" lengthAdjust="spacing" textLength="57.4" x="7" y="113.3932">Client</text><ellipse cx="39.9" cy="21" fill="#FEFECE" rx="11.2" ry="11.2" style="stroke:#A80036;stroke-width:2.8;"/><path d="M39.9,32.2 L39.9,70 M21.7,43.4 L58.1,43.4 M39.9,70 L21.7,91 M39.9,70 L58.1,91 " fill="none" style="stroke:#A80036;stroke-width:2.8;"/><text fill="#000000" font-family="sans-serif" font-size="19.6" lengthAdjust="spacing" textLength="57.4" x="7" y="363.7525">Client</text><ellipse cx="39.9" cy="382.375" fill="#FEFECE" rx="11.2" ry="11.2" style="stroke:#A80036;stroke-width:2.8;"/><path d="M39.9,393.575 L39.9,431.375 M21.7,404.775 L58.1,404.775 M39.9,431.375 L21.7,452.375 M39.9,431.375 L58.1,452.375 " fill="none" style="stroke:#A80036;stroke-width:2.8;"/><rect fill="#FEFECE" height="42.4156" style="stroke:#A80036;stroke-width:2.0999999999999996;" width="229.6" x="86.8" y="74.2"/><text fill="#000000" font-family="sans-serif" font-size="19.6" lengthAdjust="spacing" textLength="210" x="96.6" y="102.1932">BufferedInputStream</text><rect fill="#FEFECE" height="42.4156" style="stroke:#A80036;stroke-width:2.0999999999999996;" width="229.6" x="86.8" y="345.5594"/><text fill="#000000" font-family="sans-serif" font-size="19.6" lengthAdjust="spacing" textLength="210" x="96.6" y="373.5525">BufferedInputStream</text><rect fill="#FEFECE" height="42.4156" style="stroke:#A80036;stroke-width:2.0999999999999996;" width="177.8" x="469.7" y="74.2"/><text fill="#000000" font-family="sans-serif" font-size="19.6" lengthAdjust="spacing" textLength="158.2" x="479.5" y="102.1932">FileInputStream</text><rect fill="#FEFECE" height="42.4156" style="stroke:#A80036;stroke-width:2.0999999999999996;" width="177.8" x="469.7" y="345.5594"/><text fill="#000000" font-family="sans-serif" font-size="19.6" lengthAdjust="spacing" textLength="158.2" x="479.5" y="373.5525">FileInputStream</text><rect fill="#FFFFFF" height="160.1578" style="stroke:#A80036;stroke-width:1.4;" width="14" x="194.6" y="161.6016"/><polygon fill="#A80036" points="177.8,156.0016,191.8,161.6016,177.8,167.2016,183.4,161.6016" style="stroke:#A80036;stroke-width:1.4;"/><line style="stroke:#A80036;stroke-width:1.4;" x1="39.9" x2="186.2" y1="161.6016" y2="161.6016"/><text fill="#000000" font-family="sans-serif" font-size="18.2" lengthAdjust="spacing" textLength="70" x="49.7" y="154.5093">read 1K</text><polygon fill="#A80036" points="541.8,196.7875,555.8,202.3875,541.8,207.9875,547.4,202.3875" style="stroke:#A80036;stroke-width:1.4;"/><line style="stroke:#A80036;stroke-width:1.4;" x1="208.6" x2="550.2" y1="202.3875" y2="202.3875"/><text fill="#000000" font-family="sans-serif" font-size="18.2" lengthAdjust="spacing" textLength="278.6" x="218.4" y="195.2952">[buffer empty] read 4K of data</text><polygon fill="#A80036" points="224,237.5734,210,243.1734,224,248.7734,218.4,243.1734" style="stroke:#A80036;stroke-width:1.4;"/><line style="stroke:#A80036;stroke-width:1.4;" x1="215.6" x2="557.2" y1="243.1734" y2="243.1734"/><text fill="#000000" font-family="sans-serif" font-size="18.2" lengthAdjust="spacing" textLength="229.6" x="232.4" y="236.0812">return at most 4K of data</text><line style="stroke:#A80036;stroke-width:1.4;" x1="208.6" x2="267.4" y1="283.9594" y2="283.9594"/><line style="stroke:#A80036;stroke-width:1.4;" x1="267.4" x2="267.4" y1="283.9594" y2="302.1594"/><line style="stroke:#A80036;stroke-width:1.4;" x1="210" x2="267.4" y1="302.1594" y2="302.1594"/><polygon fill="#A80036" points="224,296.5594,210,302.1594,224,307.7594,218.4,302.1594" style="stroke:#A80036;stroke-width:1.4;"/><text fill="#000000" font-family="sans-serif" font-size="18.2" lengthAdjust="spacing" textLength="323.4" x="218.4" y="276.8671">[buffer not empty] read from buffer</text><polygon fill="#A80036" points="55.3,316.1594,41.3,321.7594,55.3,327.3594,49.7,321.7594" style="stroke:#A80036;stroke-width:1.4;"/><line style="stroke:#A80036;stroke-width:1.4;" x1="46.9" x2="200.2" y1="321.7594" y2="321.7594"/><!--MD5=[409464c4e48f22e633a04b751955c0c0]
@startuml

actor Client as C
participant "BufferedInputStream" as B
participant "FileInputStream" as F

C -> B: read 1K
activate B
B -> F: [buffer empty] read 4K of data
F -> B: return at most 4K of data
B -> B: [buffer not empty] read from buffer
B -> C
deactivate B

skinparam Shadowing false

@enduml

PlantUML version 1.2021.01(Tue Feb 02 10:55:08 MSK 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>